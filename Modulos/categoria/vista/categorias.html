<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Categorías</title>
</head>

<body>
    <h1>Módulo de Categorías</h1>
    <form action="/category" method="post">
        <input type="number" name="id" id="id" placeholder="ID" required> <br><br>
        <input type="text" name="name" id="name" placeholder="Nombre de la categoría" required> <br><br>
        <button type="submit">Agregar</button>
    </form>

    <h2>Lista de Categorías</h2>
    <table border="1" style="width:50%; text-align:center;">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="tabla-categorias">
            <!-- Aquí se insertan los datos -->

        </tbody>

    </table>



    <script>
        async function cargarCategory() {
            try {
                const response = await fetch("/view_category/data");
                const categoria = await response.json();

                let rows = "";
                categoria.forEach(cat => {
                    rows += `
                        <tr>
                            <td>${cat.Cat_id}</td>
                            <td>${cat.Cat_name}</td>
                            <td>
                                <input type="button" value="Editar" onclick="location.href='#'">
                                <input type="button" value="Eliminar" onclick="location.href='#'">
                            </td>
                         </tr>
                                 
                    `;

                });
                document.getElementById("tabla-categorias").innerHTML = rows;
            } catch (error) {
                console.error("Error:", error);
            }


        }

        // Función para eliminar un producto
        async function eliminarProducto(id) {
            if (confirm("¿Seguro que deseas eliminar este producto del carrito?")) {
                try {
                    const res = await fetch(`/cart/${id}`, {
                        method: "DELETE"
                    });

                    if (res.ok) {
                        alert("Producto eliminado");
                        cargarCarrito(); // recargar productos después de eliminar
                    } else {
                        alert("Error al eliminar producto");
                    }
                } catch (error) {
                    console.error("Error eliminando producto:", error);
                }
            }
        }

        window.onload = cargarCategory();  
    </script>

    <br>
    <br><input type="submit" value="Volver" onclick="location.href='/view_product'">




</body>

</html>